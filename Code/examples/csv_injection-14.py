from flask import Flask, render_template, request import csv import sqlite3 app=Flask(__name__) @app.route("/", methods=["GET", "POST"]) def index(): if request.method=="POST": data=request.files["upload_data"] if not data: return render_template("index.html", message="Missing data to upload") data.save(data.filename) conn=sqlite3.connect("qual_data.db") with open(data.filename) as file: reader=csv.reader(file) header=next(reader) tablename=data.filename.lower().replace('.csv', '').replace(' ', '_') colnames=[colname +" TEXT" for colname in header] conn.execute("CREATE TABLE IF NOT EXISTS{tablename}({columns})".format( tablename=tablename, columns=', '.join(colnames) ) ) return render_template("index.html") else: return render_template("index.html") data.save(data.filename)